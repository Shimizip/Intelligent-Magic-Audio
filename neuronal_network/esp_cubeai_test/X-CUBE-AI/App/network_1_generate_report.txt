STEdgeAI Core v9.0.0-19802
Created date          : 2024-08-05 12:15:55
Parameters            : generate --target stm32f7 --name network_1 -m /Users/leon/STM32CubeIDE/workspace_1.14.0/esp_cubeai_test/model.tflite --compression none --verbosity 1 --allocate-inputs --allocate-outputs --workspace /var/folders/jv/_zcyfzx92cg0_833lhmxrp300000gn/T/mxAI_workspace1078817497370004493157558258672032 --output /Users/leon/.stm32cubemx/network_1_output

Exec/report summary (generate)
---------------------------------------------------------------------------------------------------------------------------
model file         :   /Users/leon/STM32CubeIDE/workspace_1.14.0/esp_cubeai_test/model.tflite                              
type               :   tflite                                                                                              
c_name             :   network_1                                                                                           
compression        :   none                                                                                                
options            :   allocate-inputs, allocate-outputs                                                                   
optimization       :   balanced                                                                                            
target/series      :   stm32f7                                                                                             
workspace dir      :   /var/folders/jv/_zcyfzx92cg0_833lhmxrp300000gn/T/mxAI_workspace1078817497370004493157558258672032   
output dir         :   /Users/leon/.stm32cubemx/network_1_output                                                           
model_fmt          :   float                                                                                               
model_name         :   model                                                                                               
model_hash         :   0x0f7e2f3a443e0a3c3a982487987cb504                                                                  
params #           :   17,035 items (66.54 KiB)                                                                            
---------------------------------------------------------------------------------------------------------------------------
input 1/1          :   'serving_default_input_layer0', f32(1x30x32x1), 3.75 KBytes, activations                            
output 1/1         :   'nl_7', f32(1x5), 20 Bytes, activations                                                             
macc               :   526,726                                                                                             
weights (ro)       :   68,140 B (66.54 KiB) (1 segment)                                                                    
activations (rw)   :   19,328 B (18.88 KiB) (1 segment) *                                                                  
ram (total)        :   19,328 B (18.88 KiB) = 19,328 + 0 + 0                                                               
---------------------------------------------------------------------------------------------------------------------------
(*) 'input'/'output' buffers can be used from the activations buffer

Model name - model
------ ----------------------------------------- ---------------------- --------------- --------- ------------------------------ --- ----------------- --------------------- ---------------------------- 
m_id   layer (type,original)                     oshape                 param/size           macc                   connected to   | c_size            c_macc                c_type                       
------ ----------------------------------------- ---------------------- --------------- --------- ------------------------------ --- ----------------- --------------------- ---------------------------- 
0      serving_default_input_layer0 (Input, )    [b:1,h:30,w:32,c:1]                                                               |                                         
       conv2d_0 (Conv2D, CONV_2D)                [b:1,h:28,w:30,c:16]   160/640           120,976   serving_default_input_layer0   | -640(-100.0%)     -120,976(-100.0%)     
       nl_0_nl (Nonlinearity, CONV_2D)           [b:1,h:28,w:30,c:16]                      13,440                       conv2d_0   |                   -13,440(-100.0%)      
------ ----------------------------------------- ---------------------- --------------- --------- ------------------------------ --- ----------------- --------------------- ---------------------------- 
1      pool_1 (Pool, MAX_POOL_2D)                [b:1,h:14,w:15,c:16]                      13,440                        nl_0_nl   | +640(+100.0%)     +134,416(+1000.1%)    Conv2D_[0]                   
------ ----------------------------------------- ---------------------- --------------- --------- ------------------------------ --- ----------------- --------------------- ---------------------------- 
2      conv2d_2 (Conv2D, CONV_2D)                [b:1,h:12,w:13,c:16]   2,320/9,280       359,440                         pool_1   | -9,280(-100.0%)   -359,440(-100.0%)     
       nl_2_nl (Nonlinearity, CONV_2D)           [b:1,h:12,w:13,c:16]                       2,496                       conv2d_2   |                   -2,496(-100.0%)       
------ ----------------------------------------- ---------------------- --------------- --------- ------------------------------ --- ----------------- --------------------- ---------------------------- 
3      pool_3 (Pool, MAX_POOL_2D)                [b:1,h:6,w:6,c:16]                         2,304                        nl_2_nl   | +9,280(+100.0%)   +361,936(+15709.0%)   Conv2D_[1]                   
------ ----------------------------------------- ---------------------- --------------- --------- ------------------------------ --- ----------------- --------------------- ---------------------------- 
4      reshape_4 (Reshape, RESHAPE)              [b:1,c:576]                                                              pool_3   |                                         
------ ----------------------------------------- ---------------------- --------------- --------- ------------------------------ --- ----------------- --------------------- ---------------------------- 
5      arith_constant3 (Placeholder, )           [h:25,c:576]           14,400/57,600                                              | +100(+0.2%)       +14,450(+100.0%)      Dense_/Nonlinearity_[2, 3]   
       arith_constant4 (Placeholder, )           [c:25]                 25/100                                                     | -100(-100.0%)                           
       gemm_5 (Gemm, FULLY_CONNECTED)            [b:1,c:25]                                14,425                      reshape_4   |                   -14,425(-100.0%)      
                                                                                                                 arith_constant3   | 
                                                                                                                 arith_constant4   | 
       nl_5_nl (Nonlinearity, FULLY_CONNECTED)   [b:1,c:25]                                    25                         gemm_5   |                   -25(-100.0%)          
------ ----------------------------------------- ---------------------- --------------- --------- ------------------------------ --- ----------------- --------------------- ---------------------------- 
6      arith_constant2 (Placeholder, )           [h:5,c:25]             125/500                                                    | +20(+4.0%)        +130(+100.0%)         Dense_[4]                    
       arith_constant5 (Placeholder, )           [c:5]                  5/20                                                       | -20(-100.0%)                            
       gemm_6 (Gemm, FULLY_CONNECTED)            [b:1,c:5]                                    130                        nl_5_nl   |                   -130(-100.0%)         
                                                                                                                 arith_constant2   | 
                                                                                                                 arith_constant5   | 
------ ----------------------------------------- ---------------------- --------------- --------- ------------------------------ --- ----------------- --------------------- ---------------------------- 
7      nl_7 (Nonlinearity, LOGISTIC)             [b:1,c:5]                                     50                         gemm_6   |                                         Nonlinearity_[o][5]          
------ ----------------------------------------- ---------------------- --------------- --------- ------------------------------ --- ----------------- --------------------- ---------------------------- 
model/c-model: macc=526,726/526,726  weights=68,140/68,140  activations=--/19,328 io=--/0



Generated C-graph summary
------------------------------------------------------------------------------------------------------------------------
model name            : model
c-name                : network_1
c-node #              : 6
c-array #             : 17
activations size      : 19328 (1 segment)
weights size          : 68140 (1 segment)
macc                  : 526726
inputs                : ['serving_default_input_layer0_output']
outputs               : ['nl_7_output']

C-Arrays (17)
------ ------------------------------------- ------------- ------------------------- ------------- --------- 
c_id   name (*_array)                        item/size     domain/mem-pool           c-type        comment   
------ ------------------------------------- ------------- ------------------------- ------------- --------- 
0      conv2d_0_bias                         16/64         weights/weights           const float             
1      conv2d_0_output                       3360/13440    activations/**default**   float                   
2      conv2d_0_scratch0                     960/3840      activations/**default**   float                   
3      conv2d_0_weights                      144/576       weights/weights           const float             
4      conv2d_2_bias                         16/64         weights/weights           const float             
5      conv2d_2_output                       576/2304      activations/**default**   float                   
6      conv2d_2_scratch0                     416/1664      activations/**default**   float                   
7      conv2d_2_weights                      2304/9216     weights/weights           const float             
8      gemm_5_bias                           25/100        weights/weights           const float             
9      gemm_5_output                         25/100        activations/**default**   float                   
10     gemm_5_weights                        14400/57600   weights/weights           const float             
11     gemm_6_bias                           5/20          weights/weights           const float             
12     gemm_6_output                         5/20          activations/**default**   float                   
13     gemm_6_weights                        125/500       weights/weights           const float             
14     nl_5_nl_output                        25/100        activations/**default**   float                   
15     nl_7_output                           5/20          activations/**default**   float         /output   
16     serving_default_input_layer0_output   960/3840      activations/**default**   float         /input    
------ ------------------------------------- ------------- ------------------------- ------------- --------- 

C-Layers (6)
------ ---------------- ---- --------------- -------- ------- ---------------------------------------- --------------------- 
c_id   name (*_layer)   id   layer_type      macc     rom     tensors                                  shape (array id)      
------ ---------------- ---- --------------- -------- ------- ---------------------------------------- --------------------- 
0      conv2d_0         1    Conv2D          147856   640     I: serving_default_input_layer0_output   f32(1x30x32x1) (16)   
                                                              S: conv2d_0_scratch0                                           
                                                              W: conv2d_0_weights                      f32(16x3x3x1) (3)     
                                                              W: conv2d_0_bias                         f32(16) (0)           
                                                              O: conv2d_0_output                       f32(1x14x15x16) (1)   
------ ---------------- ---- --------------- -------- ------- ---------------------------------------- --------------------- 
1      conv2d_2         3    Conv2D          364240   9280    I: conv2d_0_output                       f32(1x14x15x16) (1)   
                                                              S: conv2d_2_scratch0                                           
                                                              W: conv2d_2_weights                      f32(16x3x3x16) (7)    
                                                              W: conv2d_2_bias                         f32(16) (4)           
                                                              O: conv2d_2_output                       f32(1x6x6x16) (5)     
------ ---------------- ---- --------------- -------- ------- ---------------------------------------- --------------------- 
2      gemm_5           5    Dense           14425    57700   I: conv2d_2_output                       f32(1x6x6x16) (5)     
                                                              W: gemm_5_weights                        f32(25x576) (10)      
                                                              W: gemm_5_bias                           f32(25) (8)           
                                                              O: gemm_5_output                         f32(1x25) (9)         
------ ---------------- ---- --------------- -------- ------- ---------------------------------------- --------------------- 
3      nl_5_nl          5    Nonlinearity    25       0       I: gemm_5_output                         f32(1x25) (9)         
                                                              O: nl_5_nl_output                        f32(1x25) (14)        
------ ---------------- ---- --------------- -------- ------- ---------------------------------------- --------------------- 
4      gemm_6           6    Dense           130      520     I: nl_5_nl_output                        f32(1x25) (14)        
                                                              W: gemm_6_weights                        f32(5x25) (13)        
                                                              W: gemm_6_bias                           f32(5) (11)           
                                                              O: gemm_6_output                         f32(1x5) (12)         
------ ---------------- ---- --------------- -------- ------- ---------------------------------------- --------------------- 
5      nl_7             7    Nonlinearity    50       0       I: gemm_6_output                         f32(1x5) (12)         
                                                              O: nl_7_output                           f32(1x5) (15)         
------ ---------------- ---- --------------- -------- ------- ---------------------------------------- --------------------- 



Number of operations per c-layer
------- ------ ------------------------ --------- -------------- 
c_id    m_id   name (type)                    #op           type 
------- ------ ------------------------ --------- -------------- 
0       1      conv2d_0 (Conv2D)          147,856   smul_f32_f32 
1       3      conv2d_2 (Conv2D)          364,240   smul_f32_f32 
2       5      gemm_5 (Dense)              14,425   smul_f32_f32 
3       5      nl_5_nl (Nonlinearity)          25     op_f32_f32 
4       6      gemm_6 (Dense)                 130   smul_f32_f32 
5       7      nl_7 (Nonlinearity)             50     op_f32_f32 
------- ------ ------------------------ --------- -------------- 
total                                     526,726 

Number of operation types
---------------- --------- ----------- 
operation type           #           % 
---------------- --------- ----------- 
smul_f32_f32       526,651      100.0% 
op_f32_f32              75        0.0% 

Complexity report (model)
------ ----------------- ------------------------- ------------------------- -------- 
m_id   name              c_macc                    c_rom                     c_id     
------ ----------------- ------------------------- ------------------------- -------- 
1      pool_1            |||||||           28.1%   |                  0.9%   [0]      
3      pool_3            ||||||||||||||||  69.2%   |||               13.6%   [1]      
5      arith_constant3   |                  2.7%   ||||||||||||||||  84.7%   [2, 3]   
6      arith_constant2   |                  0.0%   |                  0.8%   [4]      
7      nl_7              |                  0.0%   |                  0.0%   [5]      
------ ----------------- ------------------------- ------------------------- -------- 
macc=526,726 weights=68,140 act=19,328 ram_io=0

Generated files (7)
------------------------------------------------------------------- 
/Users/leon/.stm32cubemx/network_1_output/network_1_data_params.h   
/Users/leon/.stm32cubemx/network_1_output/network_1_data_params.c   
/Users/leon/.stm32cubemx/network_1_output/network_1_data.h          
/Users/leon/.stm32cubemx/network_1_output/network_1_data.c          
/Users/leon/.stm32cubemx/network_1_output/network_1_config.h        
/Users/leon/.stm32cubemx/network_1_output/network_1.h               
/Users/leon/.stm32cubemx/network_1_output/network_1.c               
