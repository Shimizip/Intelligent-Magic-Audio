\doxysection{f401\+\_\+sd\+\_\+card\+\_\+audio\+\_\+codec\+\_\+test/\+Core/\+Src/cpu\+\_\+time.c File Reference}
\hypertarget{cpu__time_8c}{}\label{cpu__time_8c}\index{f401\_sd\_card\_audio\_codec\_test/Core/Src/cpu\_time.c@{f401\_sd\_card\_audio\_codec\_test/Core/Src/cpu\_time.c}}


Functions for cycle counting and time measurement using DWT on STM32.  


{\ttfamily \#include "{}cpu\+\_\+time.\+h"{}}\newline
{\ttfamily \#include "{}stm32f4xx\+\_\+hal.\+h"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{cpu__time_8c_a75488d6e4336feaf923f75732a584b67}{Enable\+DWT}} (void)
\begin{DoxyCompactList}\small\item\em Configures and enables the Data Watchpoint and Trace (DWT) unit. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{cpu__time_8c_adb1616ca6071854d4bc553ef60018040}{Start\+Cycle\+Measurement}} (void)
\begin{DoxyCompactList}\small\item\em Starts cycle measurement. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{cpu__time_8c_af065998731653eacc11f0af98694a6f7}{Stop\+Cycle\+Measurement}} (void)
\begin{DoxyCompactList}\small\item\em Stops cycle measurement. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{cpu__time_8c_a4b92abe7a61a85c15649b9f72625b1cb}{Get\+Measured\+Cycles}} (void)
\begin{DoxyCompactList}\small\item\em Retrieves the measured number of cycles. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{cpu__time_8c_aaeec508a5c2cfaeb4da0ca0ee77f85d4}{Cycles\+To\+Milliseconds}} (uint32\+\_\+t cycles)
\begin{DoxyCompactList}\small\item\em Converts cycle count to milliseconds. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{cpu__time_8c_a57a5c934219557f58932efe9c37deb93}{Cycles\+To\+Microseconds}} (uint32\+\_\+t cycles)
\begin{DoxyCompactList}\small\item\em Converts cycle count to microseconds. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{cpu__time_8c_a38f0013558aaf378aa09e0afee8602d6}\label{cpu__time_8c_a38f0013558aaf378aa09e0afee8602d6} 
volatile unsigned int \texorpdfstring{$\ast$}{*} {\bfseries DWT\+\_\+\+CYCCNT} = (volatile unsigned int \texorpdfstring{$\ast$}{*})0x\+E0001004
\item 
\Hypertarget{cpu__time_8c_a6714d4478d28db754b5163792135be28}\label{cpu__time_8c_a6714d4478d28db754b5163792135be28} 
volatile unsigned int \texorpdfstring{$\ast$}{*} {\bfseries DWT\+\_\+\+CONTROL} = (volatile unsigned int \texorpdfstring{$\ast$}{*})0x\+E0001000
\item 
\Hypertarget{cpu__time_8c_a6840013a4ffced8484a019327dbf8a5e}\label{cpu__time_8c_a6840013a4ffced8484a019327dbf8a5e} 
volatile unsigned int \texorpdfstring{$\ast$}{*} {\bfseries DWT\+\_\+\+LAR} = (volatile unsigned int \texorpdfstring{$\ast$}{*})0x\+E0001\+FB0
\item 
\Hypertarget{cpu__time_8c_aceeaf3d875021dc5ccac97cce6b8ffa8}\label{cpu__time_8c_aceeaf3d875021dc5ccac97cce6b8ffa8} 
volatile unsigned int \texorpdfstring{$\ast$}{*} {\bfseries SCB\+\_\+\+DEMCR} = (volatile unsigned int \texorpdfstring{$\ast$}{*})0x\+E000\+EDFC
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Functions for cycle counting and time measurement using DWT on STM32. 

This file provides functions to configure and use the Data Watchpoint and Trace (DWT) unit on STM32 microcontrollers for precise cycle counting. 

\doxysubsection{Function Documentation}
\Hypertarget{cpu__time_8c_a57a5c934219557f58932efe9c37deb93}\index{cpu\_time.c@{cpu\_time.c}!CyclesToMicroseconds@{CyclesToMicroseconds}}
\index{CyclesToMicroseconds@{CyclesToMicroseconds}!cpu\_time.c@{cpu\_time.c}}
\doxysubsubsection{\texorpdfstring{CyclesToMicroseconds()}{CyclesToMicroseconds()}}
{\footnotesize\ttfamily \label{cpu__time_8c_a57a5c934219557f58932efe9c37deb93} 
uint32\+\_\+t Cycles\+To\+Microseconds (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{cycles}{}\end{DoxyParamCaption})}



Converts cycle count to microseconds. 

Converts a given number of cycles to microseconds based on the system clock frequency.


\begin{DoxyParams}{Parameters}
{\em cycles} & The number of cycles to convert. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The equivalent time in microseconds. 
\end{DoxyReturn}
\Hypertarget{cpu__time_8c_aaeec508a5c2cfaeb4da0ca0ee77f85d4}\index{cpu\_time.c@{cpu\_time.c}!CyclesToMilliseconds@{CyclesToMilliseconds}}
\index{CyclesToMilliseconds@{CyclesToMilliseconds}!cpu\_time.c@{cpu\_time.c}}
\doxysubsubsection{\texorpdfstring{CyclesToMilliseconds()}{CyclesToMilliseconds()}}
{\footnotesize\ttfamily \label{cpu__time_8c_aaeec508a5c2cfaeb4da0ca0ee77f85d4} 
uint32\+\_\+t Cycles\+To\+Milliseconds (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{cycles}{}\end{DoxyParamCaption})}



Converts cycle count to milliseconds. 

Converts a given number of cycles to milliseconds based on the system clock frequency.


\begin{DoxyParams}{Parameters}
{\em cycles} & The number of cycles to convert. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The equivalent time in milliseconds. 
\end{DoxyReturn}
\Hypertarget{cpu__time_8c_a75488d6e4336feaf923f75732a584b67}\index{cpu\_time.c@{cpu\_time.c}!EnableDWT@{EnableDWT}}
\index{EnableDWT@{EnableDWT}!cpu\_time.c@{cpu\_time.c}}
\doxysubsubsection{\texorpdfstring{EnableDWT()}{EnableDWT()}}
{\footnotesize\ttfamily \label{cpu__time_8c_a75488d6e4336feaf923f75732a584b67} 
void Enable\+DWT (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Configures and enables the Data Watchpoint and Trace (DWT) unit. 

Enables DWT and ITM, unlocks DWT registers, resets the cycle counter, and enables the cycle counter. \Hypertarget{cpu__time_8c_a4b92abe7a61a85c15649b9f72625b1cb}\index{cpu\_time.c@{cpu\_time.c}!GetMeasuredCycles@{GetMeasuredCycles}}
\index{GetMeasuredCycles@{GetMeasuredCycles}!cpu\_time.c@{cpu\_time.c}}
\doxysubsubsection{\texorpdfstring{GetMeasuredCycles()}{GetMeasuredCycles()}}
{\footnotesize\ttfamily \label{cpu__time_8c_a4b92abe7a61a85c15649b9f72625b1cb} 
uint32\+\_\+t Get\+Measured\+Cycles (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Retrieves the measured number of cycles. 

Calculates the difference between {\ttfamily end\+\_\+cycles} and {\ttfamily start\+\_\+cycles} to return the number of cycles elapsed.

\begin{DoxyReturn}{Returns}
The number of cycles measured. 
\end{DoxyReturn}
\Hypertarget{cpu__time_8c_adb1616ca6071854d4bc553ef60018040}\index{cpu\_time.c@{cpu\_time.c}!StartCycleMeasurement@{StartCycleMeasurement}}
\index{StartCycleMeasurement@{StartCycleMeasurement}!cpu\_time.c@{cpu\_time.c}}
\doxysubsubsection{\texorpdfstring{StartCycleMeasurement()}{StartCycleMeasurement()}}
{\footnotesize\ttfamily \label{cpu__time_8c_adb1616ca6071854d4bc553ef60018040} 
void Start\+Cycle\+Measurement (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Starts cycle measurement. 

Records the current cycle count from the DWT cycle counter to {\ttfamily start\+\_\+cycles}. \Hypertarget{cpu__time_8c_af065998731653eacc11f0af98694a6f7}\index{cpu\_time.c@{cpu\_time.c}!StopCycleMeasurement@{StopCycleMeasurement}}
\index{StopCycleMeasurement@{StopCycleMeasurement}!cpu\_time.c@{cpu\_time.c}}
\doxysubsubsection{\texorpdfstring{StopCycleMeasurement()}{StopCycleMeasurement()}}
{\footnotesize\ttfamily \label{cpu__time_8c_af065998731653eacc11f0af98694a6f7} 
void Stop\+Cycle\+Measurement (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Stops cycle measurement. 

Records the current cycle count from the DWT cycle counter to {\ttfamily end\+\_\+cycles}. 