Neural Network Tools for STM32AI v1.6.0 (STM.ai v7.3.0-RC5)
Created date          : 2024-06-13 17:43:22
Parameters            : generate --name network_1 -m C:/Users/jonas/Downloads/model-2.h5 --type keras --compression none --verbosity 1 --workspace C:\Users\jonas\AppData\Local\Temp\mxAI_workspace2491169015390016930968428280127545 --output C:\Users\jonas\.stm32cubemx\network_1_output --allocate-inputs --allocate-outputs

Exec/report summary (generate)
----------------------------------------------------------------------------------------------------------
model file         :   C:\Users\jonas\Downloads\model-2.h5                                               
type               :   keras                                                                             
c_name             :   network_1                                                                         
compression        :   none                                                                              
options            :   allocate-inputs, allocate-outputs                                                 
optimization       :   balanced                                                                          
target/series      :   generic                                                                           
workspace dir      :   C:\Users\jonas\AppData\Local\Temp\mxAI_workspace2491169015390016930968428280127545
output dir         :   C:\Users\jonas\.stm32cubemx\network_1_output                                      
model_fmt          :   float                                                                             
model_name         :   model2                                                                            
model_hash         :   8a1a510bdaf66f5e80511baccb5db039                                                  
params #           :   17,035 items (66.54 KiB)                                                          
----------------------------------------------------------------------------------------------------------
input 1/1          :   'input_0' (domain:activations/**default**)                                        
                   :   960 items, 3.75 KiB, ai_float, float, (1,30,32,1)                                 
output 1/1         :   'dense_1' (domain:activations/**default**)                                        
                   :   5 items, 20 B, ai_float, float, (1,1,1,5)                                         
macc               :   526,726                                                                           
weights (ro)       :   68,140 B (66.54 KiB) (1 segment)                                                  
activations (rw)   :   19,328 B (18.88 KiB) (1 segment) *                                                
ram (total)        :   19,328 B (18.88 KiB) = 19,328 + 0 + 0                                             
----------------------------------------------------------------------------------------------------------
(*) 'input'/'output' buffers can be used from the activations buffer

Model name - model2 ['input_0'] ['dense_1']
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
id   layer (type,original)                  oshape                    param/size      macc      connected to      |   c_size            c_macc                c_type                     
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
0    input_0 (Input, None)                  [b:None,h:30,w:32,c:1]                                                |                                          
     conv2d_conv2d (Conv2D, Conv2D)         [b:None,h:28,w:30,c:16]   160/640         120,976   input_0           |   -640(-100.0%)     -120,976(-100.0%)    
     conv2d (Nonlinearity, Conv2D)          [b:None,h:28,w:30,c:16]                   13,440    conv2d_conv2d     |                     -13,440(-100.0%)     
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1    max_pooling2d (Pool, MaxPooling2D)     [b:None,h:14,w:15,c:16]                   13,440    conv2d            |   +640(+100.0%)     +134,416(+1000.1%)    optimized_conv2d_of32[0]   
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
2    conv2d_1_conv2d (Conv2D, Conv2D)       [b:None,h:12,w:13,c:16]   2,320/9,280     359,440   max_pooling2d     |   -9,280(-100.0%)   -359,440(-100.0%)    
     conv2d_1 (Nonlinearity, Conv2D)        [b:None,h:12,w:13,c:16]                   2,496     conv2d_1_conv2d   |                     -2,496(-100.0%)      
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
3    max_pooling2d_1 (Pool, MaxPooling2D)   [b:None,h:6,w:6,c:16]                     2,304     conv2d_1          |   +9,280(+100.0%)   +361,936(+15709.0%)   optimized_conv2d_of32[1]   
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
4    flatten (Reshape, Flatten)             [b:None,c:576]                                      max_pooling2d_1   |                                          
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
5    dense_dense (Dense, Dense)             [b:None,c:25]             14,425/57,700   14,425    flatten           |                     +25(+0.2%)            dense_of32/nl_of32[2, 3]   
     dense (Nonlinearity, Dense)            [b:None,c:25]                             25        dense_dense       |                     -25(-100.0%)         
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
6    dense_1_dense (Dense, Dense)           [b:None,c:5]              130/520         130       dense             |                     +50(+38.5%)           dense_of32/nl_of32[o][4, 5]
     dense_1 (Nonlinearity, Dense)          [b:None,c:5]                              50        dense_1_dense     |                     -50(-100.0%)         
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
model/c-model: macc=526,726/526,726  weights=68,140/68,140  activations=--/19,328 io=--/0



Generated C-graph summary
------------------------------------------------------------------------------------------------------------------------
model name            : model2
c-name                : network_1
c-node #              : 6
c-array #             : 17
activations size      : 19328 (1 segment)
weights size          : 68140 (1 segment)
macc                  : 526726
inputs                : ['input_0_output']
outputs               : ['dense_1_output']

C-Arrays (17)
----------------------------------------------------------------------------------------------------------
c_id   name (*_array)             item/size     domain/mem-pool           c-type        fmt       comment
----------------------------------------------------------------------------------------------------------
0      dense_dense_bias           25/100        weights/weights           const float   float32          
1      dense_1_output             5/20          activations/**default**   float         float32   /output
2      dense_1_dense_weights      125/500       weights/weights           const float   float32          
3      dense_1_dense_bias         5/20          weights/weights           const float   float32          
4      conv2d_conv2d_weights      144/576       weights/weights           const float   float32          
5      conv2d_conv2d_scratch0     960/3840      activations/**default**   float         float32          
6      conv2d_conv2d_bias         16/64         weights/weights           const float   float32          
7      conv2d_1_conv2d_scratch0   416/1664      activations/**default**   float         float32          
8      conv2d_1_conv2d_weights    2304/9216     weights/weights           const float   float32          
9      input_0_output             960/3840      activations/**default**   float         float32   /input 
10     conv2d_conv2d_output       3360/13440    activations/**default**   float         float32          
11     conv2d_1_conv2d_bias       16/64         weights/weights           const float   float32          
12     conv2d_1_conv2d_output     576/2304      activations/**default**   float         float32          
13     dense_dense_output         25/100        activations/**default**   float         float32          
14     dense_dense_weights        14400/57600   weights/weights           const float   float32          
15     dense_output               25/100        activations/**default**   float         float32          
16     dense_1_dense_output       5/20          activations/**default**   float         float32          
----------------------------------------------------------------------------------------------------------

C-Layers (6)
-------------------------------------------------------------------------------------------------------------------
c_id   name (*_layer)    id   layer_type          macc     rom     tensors                       shape (array id) 
-------------------------------------------------------------------------------------------------------------------
0      conv2d_conv2d     1    optimized_conv2d    147856   640     I: input_0_output             (1,30,32,1) (9)  
                                                                   S: conv2d_conv2d_scratch0                      
                                                                   W: conv2d_conv2d_weights      (1,16,3,3) (4)   
                                                                   W: conv2d_conv2d_bias         (1,1,1,16) (6)   
                                                                   O: conv2d_conv2d_output       (1,14,15,16) (10)
-------------------------------------------------------------------------------------------------------------------
1      conv2d_1_conv2d   3    optimized_conv2d    364240   9280    I: conv2d_conv2d_output       (1,14,15,16) (10)
                                                                   S: conv2d_1_conv2d_scratch0                    
                                                                   W: conv2d_1_conv2d_weights    (16,16,3,3) (8)  
                                                                   W: conv2d_1_conv2d_bias       (1,1,1,16) (11)  
                                                                   O: conv2d_1_conv2d_output     (1,6,6,16) (12)  
-------------------------------------------------------------------------------------------------------------------
2      dense_dense       5    dense               14425    57700   I: conv2d_1_conv2d_output0    (1,1,1,576) (12) 
                                                                   W: dense_dense_weights        (576,1,1,25) (14)
                                                                   W: dense_dense_bias           (1,1,1,25) (0)   
                                                                   O: dense_dense_output         (1,1,1,25) (13)  
-------------------------------------------------------------------------------------------------------------------
3      dense             5    nl                  25       0       I: dense_dense_output         (1,1,1,25) (13)  
                                                                   O: dense_output               (1,1,1,25) (15)  
-------------------------------------------------------------------------------------------------------------------
4      dense_1_dense     6    dense               130      520     I: dense_output               (1,1,1,25) (15)  
                                                                   W: dense_1_dense_weights      (25,1,1,5) (2)   
                                                                   W: dense_1_dense_bias         (1,1,1,5) (3)    
                                                                   O: dense_1_dense_output       (1,1,1,5) (16)   
-------------------------------------------------------------------------------------------------------------------
5      dense_1           6    nl                  50       0       I: dense_1_dense_output       (1,1,1,5) (16)   
                                                                   O: dense_1_output             (1,1,1,5) (1)    
-------------------------------------------------------------------------------------------------------------------



Number of operations per c-layer
-------------------------------------------------------------------------------------------------------------
c_id    m_id   name (type)                          #op (type)                       #param (sparsity)      
-------------------------------------------------------------------------------------------------------------
0       1      conv2d_conv2d (optimized_conv2d)             147,856 (smul_f32_f32)              160 (0.0000)
1       3      conv2d_1_conv2d (optimized_conv2d)           364,240 (smul_f32_f32)            2,320 (0.0000)
2       5      dense_dense (dense)                           14,425 (smul_f32_f32)           14,425 (0.0000)
3       5      dense (nl)                                        25 (op_f32_f32)                            
4       6      dense_1_dense (dense)                            130 (smul_f32_f32)              130 (0.0000)
5       6      dense_1 (nl)                                      50 (op_f32_f32)                            
-------------------------------------------------------------------------------------------------------------
total                                                       526,726                          17,035 (0.0000)

  Number of operation types
  ---------------------------------------------
  smul_f32_f32             526,651      100.0%
  op_f32_f32                    75        0.0%

Complexity report (model)
------------------------------------------------------------------------------------
m_id   name              c_macc                    c_rom                     c_id  
------------------------------------------------------------------------------------
1      max_pooling2d     |||||||           28.1%   |                  0.9%   [0]   
3      max_pooling2d_1   ||||||||||||||||  69.2%   |||               13.6%   [1]   
5      dense_dense       |                  2.7%   ||||||||||||||||  84.7%   [2, 3]
6      dense_1_dense     |                  0.0%   |                  0.8%   [4, 5]
------------------------------------------------------------------------------------
macc=526,726 weights=68,140 act=19,328 ram_io=0

Generated files (7)
------------------------------------------------------------------------------
C:\Users\jonas\.stm32cubemx\network_1_output\network_1_config.h
C:\Users\jonas\.stm32cubemx\network_1_output\network_1.h
C:\Users\jonas\.stm32cubemx\network_1_output\network_1.c
C:\Users\jonas\.stm32cubemx\network_1_output\network_1_data_params.h
C:\Users\jonas\.stm32cubemx\network_1_output\network_1_data_params.c
C:\Users\jonas\.stm32cubemx\network_1_output\network_1_data.h
C:\Users\jonas\.stm32cubemx\network_1_output\network_1_data.c
